% This work is licensed under the Creative Commons
% Attribution-NonCommercial-ShareAlike 4.0 International License. To view a copy
% of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/ or
% send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.

\section{Aufgabenblatt 6}
\subsection{Aufgabe 6.1 (Resolutionsableitungen)}
Resolventenbildung: Entferne $A$ aus $C_1$ und $\neg A$ aus $C_2$ und verknüpfe den Rest disjunktiv.\\
Die Auswahl der beiden Klausel für die Resolventenbildung erfolgt mit der \textit{Methode des scharfen Hinsehens}. 
Es ist sinnvoll rückwärts zu denken:
\begin{align*}
	[A,B],[A,\neg B],[\neg A]\Reso[A,A],[\neg A]\Reso[~]
\end{align*}
Eine andere Strategie ist, zu Beginn alle einstelligen Klauseln auszunutzen. 
In Aufgabe 1 (b) kann man in allen Klauseln schon $\neg s$ und $r$ rausstreichen, wegen den Klauseln 4 und 5.

\subsubsection{Aufgabe 6.1 (a)}
\begin{align*}
	\begin{array}{rll}
		9 & \Res(2,6,t) & [q,r]\\
		10 & \Res(9, 7,r) & [q]\\
		11 & \Res(10,8,q) & [\neg t]\\
		12 & \Res(11,2, t) & [~]
	\end{array}
\end{align*}

\subsubsection{Aufgabe 6.1 (b)}
\begin{align*}
	\begin{array}{rll}
		9 & \Res(4,7,s) & [q,r]\\
		10 & \Res(5,9,r) & [q]\\
		11 & \Res(4,8,s) & [\neg q,\neg q]\\
		13 & \Res(10,11,q) & [~]
	\end{array}
\end{align*}

\subsection{Aufgabe 6.2 (Anwendungen des Resolutionsverfahrens)}
Strategie:
\begin{enumerate}
	\item Ersetze $A\to B$ durch $\neg A\vee B$.
	\item Schreibe Formel so um, dass Unerfüllbarkeit zu zeigen ist.
	\item Bringe Formel in KNF mit den bekannten Ersetzungsregeln.
	\item Wende Resolutionsverfahren an (wie Aufgabe 1).
\end{enumerate}

\subsubsection{Aufgabe 6.2 (a)}
Hier schreiben wir direkt die Negation, da wir die Tautologie-Eigenschaft zeigen wollen, indem wir zeigen, dass die Negation unerfüllbar ist.
\begin{align*}
	&\neg((((p\wedge q)\to r)\wedge\neg r)\to(p\to(q\to r)))\\
	&\equiv
	\neg(\neg((\neg(p\wedge q)\vee r)\wedge\neg r)\vee(\neg p\vee(\neg q\vee r)))\\
	&\equiv
	\langle[\neg(\neg((\neg(p\wedge q)\vee r)\wedge\neg r)\vee(\neg p\vee(\neg q\vee r)))]\rangle\\
	&\equiv
	\langle[\neg\neg((\neg(p\wedge q)\vee r)\wedge\neg r)],[\neg(\neg p\vee(\neg q\vee r))]\rangle\\
	&\equiv
	\langle[((\neg(p\wedge q)\vee r)\wedge\neg r)],[\neg(\neg p\vee(\neg q\vee r))]\rangle\\
	&\equiv
	\langle[(\neg(p\wedge q)\vee r)],[\neg r],[\neg(\neg p\vee(\neg q\vee r))]\rangle\\
	&\equiv
	\langle[\neg(p\wedge q), r],[\neg r],[\neg(\neg p\vee(\neg q\vee r))]\rangle\\
	&\equiv
	\langle[\neg p,\neg q, r],[\neg r],[\neg(\neg p\vee(\neg q\vee r))]\rangle\\
	&\equiv
	\langle[\neg p,\neg q, r],[\neg r],[\neg\neg p],[\neg(\neg q\vee r)]\rangle\\
	&\equiv
	\langle[\neg p,\neg q, r],[\neg r],[p],[\neg(\neg q\vee r)]\rangle\\
	&\equiv
	\langle[\neg p,\neg q, r],[\neg r],[p],[\neg\neg q],[\neg r)]\rangle\\
	&\equiv
	\langle[\neg p,\neg q, r],[\neg r],[p],[q],[\neg r]\rangle\\,
	&\begin{array}{rll}
		1 &&[\neg p,\neg q,r]\\
		2 &&[\neg r]\\
		3 &&[p]\\
		4 &&[q]\\
		5 &&[\neg r]\\
		6 & \Res(1,2,r) & [\neg p,\neg q]\\
		7 & \Res(6,3,p) & [\neg q]\\
		8 & \Res(7,4,q) & [~]
	\end{array}
\end{align*}
Damit ist gezeigt, dass die Negation der gegebenen Formel unerfüllbar ist. 
Daher ist die gegebene Formel allgemeingültig (bzw. eine Tautologie).

\subsubsection{Aufgabe 6.2 (b)}
\begin{align*}
	&((\neg r\vee(p\wedge q))\wedge\neg((r\to p)\wedge(r\to q)))\\
	&\equiv
	((\neg r\vee(p\wedge q))\wedge\neg((\neg r\vee p)\wedge(\neg r\vee q)))\\
	&\equiv
	\langle[((\neg r\vee(p\wedge q))\wedge\neg((\neg r\vee p)\wedge(\neg r\vee q)))]\rangle\\
	&\equiv
	\langle[(\neg r\vee(p\wedge q))],[\neg((\neg r\vee p)\wedge(\neg r\vee q))]\rangle\\
	&\equiv
	\langle[\neg r,(p\wedge q)],[\neg((\neg r\vee p)\wedge(\neg r\vee q))]\rangle\\
	&\equiv
	\langle[\neg r, p],[\neg r, q],[\neg((\neg r\vee p)\wedge(\neg r\vee q))]\rangle\\
	&\equiv
	\langle[\neg r, p],[\neg r, q],[\neg(\neg r\vee p),\neg(\neg r\vee q)]\rangle\\
	&\equiv
	\langle[\neg r, p],[\neg r, q],[\neg\neg r,\neg(\neg r\vee q)],[\neg p,\neg(\neg r\vee q)]\rangle\\
	&\equiv
	\langle[\neg r, p],[\neg r, q],[r,\neg(\neg r\vee q)],[\neg p,\neg(\neg r\vee q)]\rangle\\
	&\equiv
	\langle[\neg r, p],[\neg r, q],[r,\neg\neg r],[r,\neg q],[\neg p,\neg(\neg r\vee q)]\rangle\\
	&\equiv
	\langle[\neg r, p],[\neg r, q],[r,\neg\neg r],[r,\neg q],[\neg p,\neg\neg r],[\neg p,\neg q)]\rangle\\
	&\equiv
	\langle[\neg r, p],[\neg r, q],[r,r],[r,\neg q],[\neg p, r],[\neg p,\neg q)]\rangle\\
	&\begin{array}{rll}
		1 &&[\neg r,p]\\
		2 &&[\neg r,q]\\
		3 &&[r,r]\\
		4 &&[\neg r,\neg q]\\
		5 &&[\neg p,r]\\
		6 &&[\neg p,\neg q]\\
		7 & \Res(2,3,r) & [q]\\
		8 & \Res(3,4,r) & [\neg q]\\
		9 & \Res(7,8,q) & [~]
	\end{array}
\end{align*}

\subsubsection{Aufgabe 6.2 (c)}
Wieder von Beginn an negieren, da wir Unerfüllbarkeit zeigen wollen.
\begin{align*}
	&\neg(((p\to q)\to p)\to p)\\
	&\equiv
	\neg(\neg(\neg(\neg p\vee q)\vee p)\vee p)\\
	&\equiv
	\langle[\neg(\neg(\neg(\neg p\vee q)\vee p)\vee p)]\rangle\\
	&\equiv
	\langle[\neg\neg(\neg(\neg p\vee q)\vee p)], [\neg p]\rangle\\
	&\equiv
	\langle[(\neg(\neg p\vee q)\vee p)], [\neg p]\rangle\\
	&\equiv
	\langle[\neg(\neg p\vee q), p], [\neg p]\rangle\\
	&\equiv
	\langle[\neg\neg p, p],[\neg q, p], [\neg p]\rangle\\
	&\equiv
	\langle[p, p],[\neg q, p], [\neg p]\rangle\\
	&\Reso[~]\mit\Res([p,p],[\neg p])
\end{align*}

\subsubsection{Aufgabe 6.2 (d)}
Wieder von Beginn an negieren, da wir Unerfüllbarkeit zeigen wollen.
\begin{align*}
	&\neg(((p\to q)\wedge(q\to r))\to\neg(\neg r\wedge p))\\
	&\equiv
	\neg(\neg((\neg p\vee q)\wedge(\neg q\vee r))\vee\neg(\neg r\wedge p))\\
	&\equiv
	\langle[\neg(\neg((\neg p\vee q)\wedge(\neg q\vee r))\vee\neg(\neg r\wedge p))]\rangle\\
	&\equiv
	\langle[\neg\neg((\neg p\vee q)\wedge(\neg q\vee r))],[\neg\neg(\neg r\wedge p)]\rangle\\
	&\equiv
	\langle[((\neg p\vee q)\wedge(\neg q\vee r))],[(\neg r\wedge p)]\rangle\\
	&\equiv
	\langle[(\neg p\vee q)],[(\neg q\vee r)],[(\neg r\wedge p)]\rangle\\
	&\equiv
	\langle[\neg p, q],[\neg q,r],[(\neg r\wedge p)]\rangle\\
	&\equiv
	\langle[\neg p, q],[\neg q,r],[\neg r],[p]\rangle\\
	&\begin{array}{rll}
		1 &&[\neg p,q]\\
		2 &&[\neg q,r]\\
		3 &&[\neg r]\\
		4 &&[p]\\
		5 & \Res(2,3,r) & [\neg q]\\
		6 & \Res(1,4) & [q]\\
		7 & \Res(5,6) &[~]
	\end{array}
\end{align*}

\subsection{Aufgabe 6.3 (Positive/negative Klauseln und Erfüllbarkeit)}

\subsubsection{Aufgabe 6.3 (a)}


\begin{proof}
	Sei $I_a$ die Interpretation, die alle Variablen $p\in R$ auf $\bot$ abbildet, d.h. $p^{I_a}=\bot$. Dann erfüllt $I_a$ alle Klauseln, die nicht positiv sind, d.h. alle Klauseln, die mindestens in negatives Literal enthalten. 
	Damit erfüllt $I_a$ auch jede Klauselmenge, die keine positiven Klauseln enthält.
\end{proof}

\subsubsection{Aufgabe 6.3 (b)}

\begin{proof}
	Analog zu (a) mit $I_b$, wobei $p^{I_0}=\top$ für alle $p\in R$.
\end{proof}

\subsubsection{Aufgabe 6.3 (c)}
Die Aussage ist falsch, denn die leere Klausel $[~]$ ist sowohl positive Klausel als auch negative Klausel.

\subsection{Aufgabe 6.4 (Tautologieelimination)}

\begin{proof}
	Sei $I$ beliebige Interpretation und $j\in\lbrace1,\ldots,n\rbrace$ so, dass $F,\neg F\in D_j$. 		
	Folglich:
	\begin{align*}
		D_j=\big[F_1,\ldots,F_m\big]\mit F_k=F\text{ und }F_k=F\text{ und }F_l=\neg F\qquad k,l\in\lbrace1,\ldots,m\rbrace
	\end{align*}
	Dann gilt für unsere beliebiges $I$:
	\begin{align*}
		D_j^I&=\big((\ldots(F_1\vee F_2)\vee\ldots)\vee F_m\big)^I\\
		\overset{\text{Kommu+Asso}}&=
		\big((\ldots(F_k\vee F_l)\vee\ldots)\vee F_m\big)^I\\
		&=\big((\ldots(F_k\vee F_l)^I\vee^\ast\ldots v^\ast F_m^I\big)\\
		\overset{\text{Tauto}}&=
		\big((\ldots\top \vee^\ast\ldots)\vee^\ast F_m^I\big)\\
		&=\top
	\end{align*}
	Also ist $D_j$ eine Tautologie. 
	Nach Satz 3.19 gilt $(F\wedge G)\equiv F$, wenn $G$ allgemeingültig ist. 
	Mit dieser Äquivalenz sowie der Kommutativität und Assoziativität von $\wedge$ kann die Behauptung gezeigt werden.
\end{proof}

\subsection{Aufgabe 6.5 (Subsumtion)}


\begin{proof}
	%TODO
\end{proof}

\subsection{Aufgabe 6.6 (Folgerungen und endlich viele Prämisse)}


\begin{proof}
	Bekannt:
	\begin{align*}
		\F\models G
		\overset{\text{Aufg 3.5}}&\Longleftrightarrow
		\F\cup\lbrace\neg G\rbrace\text{ ist unerfüllbar}\\
		\overset{\text{Kor. 3.46}}&\Longleftrightarrow
		\exists\F'\subseteq\F\cup\lbrace\neg G\rbrace\text{ endlich}:\F'\text{ unerfüllbar}\\
		&\Longleftrightarrow
		\exists\F''\subseteq\F\text{ endlich}:\F''\cup\lbrace\neg G\rbrace\text{ unerfüllbar}\\
		&\Longleftrightarrow
		\exists\F''\subseteq\F\text{ endlich}:\F''\models G
	\end{align*}
\end{proof}

\subsection{Aufgabe 6.7 (Korrektheit und Vollständigkeit)}
Erinnerung: $\vdash_r$ heißt ``per Resolution beweisbar`` (Syntax, arbeitet rein auf Zeichenebene).\\
Hingegen ist $\models$ die logische Konsequenzrelation (Semantik, d.h. wir betrachten Interpretationen)\nl
\ul{Korrektheit:} Wenn $\vdash F$, dann $\models F$ (für alle Formeln $F$).\nl
\ul{Vollständigkeit:} Wenn $\models F$, dann $\vdash F$ (Für alle Formeln $F$).\nl
Zum Beispiel ist das Resolutionsverfahren korrekt und vollständig.

\subsubsection{Aufgabe 6.7 (a)}

\begin{lösung}
	Korrektheit verlangt, dass alle vom Verfahren als ``allgemeingültig'' klassifizierten Formeln auch semantisch allgemeingültig (echt allgemeingültig) sind.\nl
	Ein triviales korrektes Verfahren, welches nicht vollständig ist, wäre demnach\\
	\texttt{Klassifiziere alle Formeln als ``nicht allgemeingültig''}.
\end{lösung}

\subsubsection{Aufgabe 6.7 (b)}

\begin{lösung}
	Analog zu (a):\\
	\texttt{Klassifiziere alle Formeln als ``allgemeingültig''.}
\end{lösung}
