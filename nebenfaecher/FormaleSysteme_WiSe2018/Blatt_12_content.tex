% This work is licensed under the Creative Commons
% Attribution-NonCommercial-ShareAlike 4.0 International License. To view a copy
% of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/ or
% send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.

\section{Aufgabenblatt 12}
\subsection*{Aufgabe $\ast$)}
Man kann die Aufgabe systematisch wie folgt lösen:
\begin{enumerate}
	\item Konstruiere NEA, der sie Sprache akzeptiert
	\item Stelle "Gleichungssystem" auf (siehe Aufgabenblatt zuvor)
	\item Löse Gleichungssystem mit dem Lemma von Arden
\end{enumerate}

Allerdings kann man diese Aufgabe hier auch mit \textit{der Methode des scharfen Hinsehens} lösen:\\
Die dritte Bedingung in $L$ sagt, dass die Wörter in $L$ nicht mit $a$ beginnen dürfen.
Kurz geschrieben (Achtung, keine offizielle Notation!)
\begin{align*}
	L=\Big\lbrace w=u_1 babc u_2,w=u_3 ccc u_4,w\neq a u_5:u_1,\ldots,u_5\in\Sigma^\ast\Big\rbrace
\end{align*}
Somit erhält man den Regulären Ausdruck 
\begin{align*}
	r=(b+c)^\ast\cdot(a+b+c)^\ast\cdot(b\cdot a\cdot b\cdot c+c\cdot c\cdot c)\cdot(a+b+c)^\ast
\end{align*}

\subsection*{Aufgabe $\ast\ast$)}
Hierfür nutzen wir einfach Definition 5.3:

\begin{lösung}
	\underline{Zu (a):}
	\begin{align*}
		L(r_1)
		&=L(((b(b)^\ast)+(bb)^\ast a))\\
		&=L((b(b)^\ast)\cup L((bb)^\ast a)\\
		&=L(b)\cdot L(b^\ast)\cup L((bb)^\ast)\cdot L(a)\\
		&=\lbrace b\rbrace\cdot (L(b))^\ast\cup(L(bb))^\ast\cdot L(a)\\
		&=\lbrace b\rbrace\cdot\lbrace b\rbrace^\ast\cup\lbrace bb\rbrace^\ast\cdot\lbrace a\rbrace\\
		&=\Big\lbrace b^m, b^{2\cdot n}a:m\in\N_{\geq1},n\in\N_{\geq0}\Big\rbrace
	\end{align*}
	
	Letztlich kann man sich die aufwendigen Umformungen sparen: Man ersetzt einfach + durch $\cup$ und, packt die Zeichen in Mengenklammern und fertig:
		
	\underline{Zu (b):}
	\begin{align*}
		L(r_2)&=L(((a)^\ast b(a(a)^\ast)b)^\ast b(a+b)^\ast))\\
		&=\lbrace a\rbrace^\ast\cdot\lbrace b\rbrace\cdot(\lbrace a\rbrace\cdot\lbrace a\rbrace^\ast\cdot\lbrace b \rbrace)^\ast\cdot\lbrace b\rbrace\cdot(\underbrace{\lbrace a\rbrace\cup\lbrace b\rbrace}_{=\lbrace a,b\rbrace})^\ast
	\end{align*}
	
	\underline{Zu (c):}
	\begin{align*}
		L(r_3)&=L(((a)^\ast+((((a)^\ast\cdot(b+b\cdot b))(a(a)^\ast(b+b\cdot b))^\ast)(a)^\ast))\\
		&=\lbrace a\rbrace^\ast\cup\Big(\lbrace a\rbrace^\ast\cdot\lbrace b,bb\rbrace\cdot\big(\lbrace a\rbrace\cdot\lbrace a\rbrace^\ast\cdot\lbrace b,bb\rbrace\big)^\ast\cdot\lbrace a\rbrace^\ast\Big)
	\end{align*}
\end{lösung}

\subsection{Aufgabe 1}

\begin{lösung}
	Außer a) sind alle aufgeführten Quadrupel Grammatiken, denn $\varepsilon\to\ldots$ ist nicht zulässige nach Definition 6.2 ($\varepsilon\not\in(\Sigma\cup N)^+$).
	Somit sind b), c), d), e), f) Grammatiken vom Typ 0 nach Definition 6.6.\nl
	\underline{Zu b):}
	$G_2$ ist nicht vom Typ 1, da $S\to\varepsilon$ und $S$ auf rechter Seite vorkommt und nicht vom Typ 3 (da $S\to aBb\in P$), aber vom Typ 2.\nl
	\underline{Zu c):}
	$G_3$ ist offenbar nicht vom Typ 2 oder 3, da $XY\not\in N$.\\
	$G_2$ ist auch nicht vom Typ 1, denn:\\
	\underline{Fall 1:} $X=A\implies u_1=\varepsilon,u_2=Y\implies w=\varepsilon\implies |w|=0<1$\\
	\underline{Fall 2:} $Y=A\implies u_1=X$, was auch nicht möglich ist.
	Somit ist $G_2$ eine Typ-0-Grammatik.\nl
	\underline{Zu d):}
	$G_4$ ist vom Typ 0,1,2,3.\nl
	\underline{Zu e):}
	$G_5$ ist nicht vom Typ $2$ oder Typ 3 (da $ZY\to ZX$), aber vom Typ 1.\nl
	\underline{Zu f):}
	$G_6$ ist nicht vom Typ 1, da $S\to\varepsilon$ und $S$ auf rechter Seite vorkommt.\\
	$G_6$ ist auch nicht vom Typ 2 oder 3, da $ZY\not\in N$.
	Also ist $G_6$ vom Typ 0.
\end{lösung}

\subsection{Aufgabe 2}

\begin{lösung}
	\underline{Zu $G_1$:}	\\
	$G_1$ ist offenbar nicht vom Typ 1, aber vom Typ 2 und nicht vom Typ 3.
	 \begin{align*}
	 	L(G_1)=\big\lbrace a^n b^n:n\in\N_{\geq0}\big\rbrace
	 \end{align*}
	 Da $G_1$ Grammatik vom Typ 2 ist, ist $L(G_1)$ eine $\L_2$-Sprache. 
	 Eine $\L_3$-Sprache kann es nicht sein, da es keinen DEA gibt, der $L(G_1)$ erzeugt.\\
	 Also $i=2,j=2$.\nl
	 \underline{Zu $G_2$:}\\
	 $G_2$ ist nicht vom Typ 1, aber vom Typ 2 und nicht vom Typ 3. 
	 \begin{align*}
	 	L(G_2)=\big\lbrace a,bb\big\rbrace^\ast
	 \end{align*}
	 Es gibt einen NEA mit Wortübergängen, der $L(G_2)$ akzeptiert.
	 Deshalb liegt $L(G_2)$ in der Sprachklasse $\L_3$.
	 $i=2,j=3$.
	 
	\begin{tikzpicture}[shorten >=1pt,node distance=2.7cm,on grid]
		\node[state,initial, accepting]   (q_0)                {$q_0$};
		\path[->] (q_0) edge [loop right] node [right] {bb} ()
                  edge [loop above] node [above] {a} ();
	\end{tikzpicture}

	\underline{Zu $G_3$:}\\
	$G_3$ ist nicht vom Typ 1, $aB\to a$ der Definition widerspricht. 
	$G_2$ ist auch weder vom Typ 2 noch vom Typ 3.
	\begin{align*}
		L(G_3)=L(G_1)=\big\lbrace a^n b^n:n\in\N_{\geq0}\big\rbrace
	\end{align*}
	Somit ist $L(G_3)$ eine $\L_2$-Sprache. $i=0,j=2$\nl
	\underline{Zu $G_4$:}
	$G_4$ ist Typ 0, nicht Typ 1,2,3.
	\begin{align*}
		L(G_4)=L(G_3)=L(G_1)=\big\lbrace a^n b^n:n\in\N_{\geq0}\big\rbrace
	\end{align*}
	Somit ist auch $L(G_4)$ eine $\L_3$-Sprache. $i=0,j=2$
\end{lösung} 

\subsection{Aufgabe 3}
Betrachte die Grammatik
\begin{align*}
	G_0&=\Big(\lbrace S,T,U,V,R\rbrace,\lbrace a,b\rbrace,P_0,S\Big)\\
	P_0&=\left\lbrace
		\begin{array}{c}
			 S\to\varepsilon,S\to aSb,S\to T,S\to R,\\
			 T\to bbT, T\to U\\
			 U\to aa U,U\to bbT\\
			 V\to bSa\\
			 R\to\varepsilon\\
			 R\to bSa
		\end{array}\right\rbrace		
\end{align*}

Beobachtung: Die Grammatik ist vom Typ 2 (aber nicht vom Typ 1), also kontextfrei.
	
\subsubsection{Aufgabe 3 a)}

\begin{lösung}
	Nicht-terminierend sind $T,U$.\\
	Ausführlich: Berechne terminierende Symbole:
	\begin{align*}
		T_1&:=\big\lbrace A\in N\mid\exists w\in\Sigma^\ast:A\to w\in P\big\rbrace\\
		T_{i+1}&:=T_i\cup\big\lbrace A\in N\mid\exists e\in (\Sigma\cup T_i)^\ast:A\to w\in P\big\rbrace\\
		&\rightsquigarrow T_1\lbrace S,R\rbrace,~T_2=\lbrace S,R\rbrace\cup\lbrace V\rbrace=\lbrace S,R,V\rbrace=T_3
	\end{align*}
	Nicht-erreichbar: $V$.\\
	Ausführlich: Berechnung der erreichbaren Symbole:
	\begin{align*}
		E_0&:=\lbrace S\rbrace\\
		E_{i+1}&:=E_i\cup\big\lbrace A\in N\mid \exists B\in E_i,\exists u_1,u_2\in(\Sigma\cup N)^\ast:B\to u_1 Au_2\in P\big\rbrace\\
		&\quad\text{Idee: es gibt $B$, mit dem wir $A$ erreichen}\\
		E_0&=\lbrace S\rbrace,~E_1=\lbrace S\rbrace\cup\lbrace R\rbrace=\lbrace S,R\rbrace=E_2
	\end{align*}
	Wir konstruieren die äquivalente reduzierte Grammatik:\\
	\underline{Schritt 1:} Eliminieren nicht terminierender Symbole:
	\begin{align*}
		G'&:=\big(N',\Sigma,P',S\big)\mit\\
		N'&:=\lbrace S,V,R\rbrace\\
		P'&:=\big\lbrace
			S\to\varepsilon, S\to aSb,S\to R,V\to bSa,R\to\varepsilon,R\to bSa
		\big\rbrace
	\end{align*}
	
	\underline{Schritt 2:} Eliminieren unerreichbarer Symbole:
	\begin{align*}
		G_1&:=\big(N_1,\Sigma,P_1,S\big)\mit\\
		N_1&:=\lbrace S,R\rbrace\\
		P_1&:=\big\lbrace
			S\to\varepsilon, S\to aSb,S\to R,R\to\varepsilon,R\to bSa
		\big\rbrace
	\end{align*}
\end{lösung}

\subsubsection{Aufgabe 3 b)}

\begin{lösung}
	Verwende Lemma 8.7:
	Berechnung aller Symbole, die nach $\varepsilon$ abgeleitet werden können:
	\begin{align*}
		N_1'&:=\big\lbrace A\in N:A\to\varepsilon\in P\\
		N_{i+1}'&:=N_i'\cup\big\lbrace A\in N:A\to B_1\ldots B:n\in P\text{ für }B_1,\ldots,B_n\in N_i'\big\rbrace\\
		\rightsquigarrow N_1'&=\lbrace S,R\rbrace=N_2'
	\end{align*}
	Berechnung der Grammatik $G_2(N_2,\Sigma,P_2,S)$ mit 
	\begin{align*}
		N_2&:=N_1=\lbrace S,R\rbrace\\
		P_2&:=\big(P_1\lbrace S\to\varepsilon,R\to\varepsilon)\big)\cup\lbrace S\to ab, R\to ba\rbrace\\
		&~=\big\lbrace
			S\to ab, S\to aSb,S\to R,R\to ba,R\to bSa
		\big\rbrace
	\end{align*}
	
	Nun gilt $L(G_2)=L(G_1)\setminus\lbrace\varepsilon\rbrace$.
	%\begin{align*}
		%L(G_1)=\lbrace a\rbrace\cdot\big\lbrace w\in\lbrace a,b\rbrace^\ast:|w|_a=|w|_b\big\rbrace\cdot\lbrace b\rbrace\cup\lbrace\varepsilon\rbrace
	%\end{align*}
\end{lösung}

\subsubsection{Aufgabe 3 c)}

\begin{lösung}
	Verwende Satz 8.9:
	$\varepsilon$-freie Grammatiken erlauben $\varepsilon$ alleine auf der rechten Seite einer Regel nur dann, wenn das Startsymbol $S$ auf $\varepsilon$ abgebildet wird und $S$ nie auf der rechten Seite einer Regel erscheint.
	\begin{align*}
		G_3&:=\big(N_3,\Sigma,P_3,S_3\big)\mit\\
		N_4&:=\lbrace S_3\rbrace\cup N_2=\lbrace S_3,S,R\rbrace\\
		P_3&:=P_2\cup\lbrace S_3\to S,S_3\to\varepsilon\rbrace\\
		&=\big\lbrace
			S_3\to\varepsilon, S_3\to S, S\to aSb, S\to ab, S\to R,R\to ba,R\to bSa
		\big\rbrace
	\end{align*}
	Offenbar ist $S_3$ $\varepsilon$-frei.
	Nun gilt $L(G_3)=L(G_1)$ und $G_3$ ist auch kontextsensitiv.
\end{lösung}

\subsubsection{Aufgabe 3 d)}

\begin{lösung}
	Verwende Satz 8.11:
	Bestimme zu jedem $A\in N$ die Menge 
	\begin{align*}
		N(A)&:=\big\lbrace B\in N:A\vdash_G^\ast B\big\rbrace\\
		\rightsquigarrow N(S_3)&=\lbrace S_3,S,R,~N(S)=\rbrace S,R\rbrace,~N(R)=\lbrace R\rbrace
	\end{align*}
	Dann ist $G_4=(N_4,\Sigma,P_4,S_3)$ mit
	\begin{align*}
		N_4&:=N_3=\lbrace S_3,S,R\rbrace\\
		P_4&:=\big\lbrace A\to w\mid B\to w\in P,B\in N(A),w\not\in N_4\big\rbrace\\
		&=\left\lbrace\begin{array}{l}
				S_3\to\varepsilon, S_3\to ab,S_3\to aSb,S_3\to ba,S_3\to bSa\\
			S\to ab, S\to aSb,S\to ba, S\to bSa\\
			R\to ba, R\to bSa
		\end{array}\right\rbrace
	\end{align*}
\end{lösung}

\subsubsection{Aufgabe 3 e)}
\begin{lösung}
	Verwende Satz 8.12:
	Chomsky-Normalform: es gibt nur noch Regeln der Form $A\to a$, $A\to BC$
	\begin{enumerate}
		\item $G_4$ ist bereits $\varepsilon$-frei ohne Regeln der Form $A\to B$ mit $A,B\in N$.
		\item Einführung neuer Nichtterminalsymbole $X_a$ für jedes Terminalsymbol $a\in\Sigma$ und neue Regeln $X_a\to a$.
		\item Ersetze alle Vorkommen von $a$ und $b$ durch $X_a$  und $X_b$ .
		\item Ersetze alle Regeln der Form $A\to B_1\ldots B_n$ mit $n>2$ durch 
		\begin{align*}
			A\to B_1C_1,C_1\to B_2C_2,\ldots,C_{n-2}\to B_{n-1}B_n
		\end{align*}
	\end{enumerate}
	Somit erhalten wir $G_5=(N_5,\Sigma,P_5,S_0)$ mit
	\begin{align*}
		N_5&:=\big\lbrace X_a,X_b,S_0,S,R\big\rbrace\\
		P_5&:=\left\lbrace\begin{array}{l}
			S_0\to\varepsilon, S_0\to X_a X_b, S\to X_b X_a, S_0\to X_a C_1,S_0\to X_b C_2\\
			C_1\to SX_b,C_2\to SX_a\\
			S\to X_aX_b,S\to X_bX_a,S\to X_aC_1, S\to X_b C_2\\
			R\to X_bX_a, R\to X_bC_2,X_a\to a,X_b\to b
		\end{array}\right\rbrace
	\end{align*}
\end{lösung}