% This work is licensed under the Creative Commons
% Attribution-NonCommercial-ShareAlike 4.0 International License. To view a copy
% of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/ or
% send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.

\section{Aufgabenblatt 4}
\subsection{Aufgabe 4.1 (Monotonie der klassischen Aussagenlogik)}
Seien $G$ aussagenlogische Formel und seien $\F$ und $\F'$
Mengen aussagenlogischer Formeln. 
Dann gilt:
\begin{align*}
	\big(\F\models G\und \F\subseteq\F'\big)\implies\F'\models\F
\end{align*}
Erinnerung:
\begin{align*}
	\F'\models G:\Longleftrightarrow\big(\forall I:I\models\F'\implies I\models G\big)
\end{align*}

\begin{proof}
	Sei also $I$ beliebige Interpretation mit $I\models\F'$. 
	Dann gilt nach Definition
	\begin{align*}
		\forall F'\in\F':I\models F'
	\end{align*}
	Da $\F\stackrel{\text{Vor}}{\subseteq}\F'$ folgt 
	\begin{align*}
		\forall F\in\F:I\models F
	\end{align*}
	Aus der Voraussetzung $\F\models G$ folgt nun $I\models G$. 
	Da die Interpretation $I$ beliebig war, folgt die Behauptung $\F'\models G$. 
\end{proof}

\subsection{Aufgabe 4.2  (Wissenswertes über Nessie)}
\subsubsection{Aufgabe 4.2 (a)}
\begin{align*}
	F_1 &=(m \to\neg s)\\
	F_2 &=(\neg m\to (s\wedge t))\\
	F_3&=((\neg s\vee t)\to d)\\
	F_4&=(d\to a)
\end{align*}

\subsubsection{Aufgabe 4.2 (b)}
Wissen über Nessie ist $\F:=\lbrace F_1,\ldots, F_4\rbrace$.
``Folgt daraus, dass Nessie ein Märchenwesen ist?'', d. h.
Frage: Gilt $\F\models m$?

\begin{lösung}
	Man könnte an dieser Stelle \textit{Resolution} verwenden, aber es geht auch naiv. 
	Betrachte die Interpretation $I_1$ mit\\
	$m^{I_1}=\top,~s^{I_1}=\bot,~d^{I_1}=\top,~a^{I_1}=\top$ und $t^{I_1}$ beliebig\\ und die Interpretation $I_2$ mit\\
	$m^{I_2}=\bot,~s^{I_2}=\bot,~t^{I_2}=\top, d^{I_2}=\top,a^{I_2}=\top$\\
	Dann gilt $I_1\models\F$ und $I_2\models\F$ aber $I_1\models m$ und $I_2\not\models m$. 
	Also folgt $F\not\models m$ und $\F\not\models\neg m$.
	Man kann also nichts folgern.
\end{lösung}

\subsection{Aufgabe 4.3 (Logische Äquivalenzen)}
Beachte zunächst
\begin{align*}
	G\equiv F &\stackrel{\text{Def}}{\Longleftrightarrow}
	\Big(\forall I:I\models F\gdw I\models G\Big)\\
	\overset{\text{Def}}&{\Longleftrightarrow}
	\Big(\forall I:G^I=\top\gdw F^I=\top\Big)\\
	&\Longleftrightarrow\forall I:F^I=G^I
\end{align*}

Sei also $I$ eine beliebige Interpretation im Folgenden.

\subsubsection{Aufgabe 4.3 (a)}
\begin{align*}
	[(F\vee F)]^I=F^I\vee^\ast F^I\stackeq{\text{Tab}} F^I
\end{align*}
\begin{tabular}{c||c}
	$F^I$ & $F^I\vee^\ast F^I$\\ \hline
	$\top$ & $\top$\\
	$\bot$ & $\bot$
\end{tabular}

\subsubsection{Aufgabe 4.3 (b)}
\begin{align*}
	[\neg(F\wedge G)]^I=\neg^\ast\left(F^I\wedge^\ast G^I\right)\stackeq{\text{Tab}}
	\left(\neg^\ast F^I\vee^\ast\neg^\ast G^I\right)=\big[(\neg F\vee\neg G)\big]^I
\end{align*}

\begin{tabular}{c|c||c|c}
	$F^I$ & $G^I$ & $\neg^\ast(F^I\wedge^\ast G^I)$ & $(\neg^\ast F^I\vee^\ast\neg^\ast G^I)$\\ \hline
	$\top$ & $\top$ & $\bot$ & $\bot$\\
	$\top$ & $\bot$ & $\top$ & $\top$\\
	$\bot$ & $\top$ & $\top$ & $\top$\\
	$\bot$ & $\bot$ & $\top$ & $\top$
\end{tabular}

\subsubsection{Aufgabe 4.3 (c)}
Analog zu (a) und (b).
%\begin{align*}
%[(F\to G)]^I=\left(F^I\to^\ast G^I\right)\stackeq{\text{Tab}}
%\left( F^I\to^\ast\neg^\ast G^I\right)=\big[(\neg F\vee\neg G)\big]
%\end{align*}

\subsubsection{Aufgabe 4.3 (d)}
Analog zu (a) und (b).

\subsubsection{Aufgabe 4.3 (e)}
Analog zu (a) und (b).

\subsubsection{Aufgabe 4.3 (f)}
Analog zu (a) und (b).

\subsubsection{Aufgabe 4.3 (g)}
Analog zu (a) und (b).

\subsection{Aufgabe 4.4 (Das vollständige Junktorensystem \texorpdfstring{$\lbrace\neg, \vee\rbrace$}{lbrace neg,vee rbrace})}
Zeigen Sie: Es gibt zu jeder aussagenlogischen Formel (mit was auch immer für ein-und zweistelligen Junktoren aus dem Reservoir der 4 bzw. 16 möglichen Junktoren) eine
semantisch äquivalente Formel, welche nur die Junktoren $\neg$ und $\vee$ enthält.

\begin{lösung}
	Sei $\mathcal{R}=\lbrace p_1,p_2,\ldots\rbrace$ eine Menge von aussagenlogischen Variablen, 
	$J_1:=\lbrace J_1^1,\ldots,J_1^4\rbrace$ die Menge der einstelligen Junktoren und $J_2:=\lbrace J_2^1,\ldots,J_2^{16}\rbrace$ die Menge der zweistelligen Junktoren. 
	(Es gibt nach Vorlesung genau 4 einstellige und 16 zweistellige Junktoren). 
	Es müssen also zunächst folgende 16 + 4 Ersetzungsrelegung bzw. semantische Äquivalenzen gezeigt werden (analog zu Aufgabe 4.3):
	\begin{enumerate}
		\item $J_1^1 A\equiv\neg A$
		\item $J_1^2 A\equiv\neg\neg A$
		\item $J_1^3 A\equiv A\vee\neg A$
		\item $J_1^4 A\equiv\neg(A\vee\neg A)$
	\end{enumerate}
	und
	\begin{enumerate}
		\item $A J_2^1 B\equiv A\vee B$
		\item $A J_2^2 B=A\wedge B\equiv\neg(\neg A\vee\neg B)$
		\item $A J_2^3 B=A\to B\equiv\neg A\vee B$
		\item $\ldots$
	\end{enumerate}
	Nun können wir eine rekursive Funktion auf der Menge der Formeln über den 16+4 Junktoren definieren.
	Diese konkret aufzuschreiben ist etwas awkward und wird hier nicht gemacht.
\end{lösung}

\textbf{Mitschrift aus der Übung:}
\begin{lösung}
	Leite für jeden Junktor aus der Wahrheitswertetabelle eine äquivalente Formel und daraus dann eine Ersetzungsregel ab. 
	Dabei nutzen wir die de'Morgansche Regel:
	\begin{align*}
		(\varphi_1\wedge\varphi_2)\equiv\neg(\neg\varphi_1\vee\neg\varphi_2)
	\end{align*}
	Daraus erhält man die Ersetzungsregel
	\begin{align}\label{4.4Ersetzungsregel}
		\frac{(\varphi_1\wedge\varphi_2)}{\neg(\neg\varphi_1\vee\neg\varphi_2)}
	\end{align}
	Hier am Beispiel der Implikation:\\
	\begin{tabular}{c|c||c}
		$\varphi_1^I$ & $\varphi_2^I$ & $\varphi_1^I\to^\ast\varphi_2^I$ \\ \hline
		$\top$ & $\top$ & $\top$\\
		$\top$ & $\bot$ & $\bot$\\
		$\bot$ & $\top$ & $\top$\\
		$\bot$ & $\bot$ & $\top$
	\end{tabular}

	\begin{align*}
		(\varphi_1\to\varphi_2)
		&\equiv (\varphi_1\wedge\varphi_2)\vee(\neg\varphi_1\wedge\varphi_2)\vee(\neg\varphi_1\wedge\neg\varphi_2)\\
		\overset{\eqref{4.4Ersetzungsregel}}&{\equiv}
		\neg(\neg\varphi_1\vee\neg\varphi_2)\vee\neg(\neg\neg\varphi_1\vee\varphi_2)\vee\neg(\neg\neg\varphi_1\vee\neg\neg\varphi_2)\\
		&\equiv(\neg\varphi_1\vee\varphi_2)
	\end{align*}
	Somit erhält man die Ersetzungsregel
	\begin{align*}
		\frac{(\varphi_1\to\varphi_2)}{(\neg\varphi_1\vee\varphi_2)}
	\end{align*}
	Erhalte somit alle 16 + 4 Ersetzungsregel erschöpfend auf die Formel an (d.h. bis keine Ersetzungsregel mehr anwendbar ist). 
	Damit erhält man nach endlich vielen Schritten eine semantisch äquivalente Formel, welche nur noch $\neg$ und $\vee$ enthält.
\end{lösung}

\subsection{Aufgabe 4.5 (Positionen und Ersetzungen in Formeln)}
\subsubsection{Aufgabe 4.5 (a)}
\begin{tikzpicture}[node distance=5em]
	\tikzstyle{every state}=[shape=circle,draw=black]
	\node[state] (1) {$\neg:\Lambda$};
	\node[state] (2) [below = of 1] {$\wedge:1$};
	\node[state] (3) [below left = of 2] {$p:11$};
	\node[state] (4) [below right = of 2] {$\vee:12$};
	\node[state] (5) [below left = of 4] {$q:121$};
	\node[state] (6) [below right = of 4] {$\neg:122$};
	\node[state] (7) [below of =6] {$p:1221$};
	\path 	(2) edge [, -] node {} (1)
   	   		(3) edge [, -] node {} (2)
		 	(4) edge [, -] node {} (2)
	  		(5) edge [, -] node {} (4)
	 		(6) edge [, -] node {} (4)
	  		(7) edge [, -] node {} (6)
	;	
\end{tikzpicture}

\begin{align*}
	\mathcal{P}_F=\lbrace\Lambda,1,11,12,121,122,1221\rbrace
\end{align*}
Formal:
\begin{align*}
	\pos(\neg(p\wedge(q\vee\neg p)))
	\overset{2.}&=
	\lbrace\Lambda\rbrace\cup\lbrace 1\pi:\pi\in\pos((p\wedge(q\vee\neg p)))\rbrace\\
	&=\lbrace\Lambda,1\Lambda,11\Lambda,12\Lambda,121\Lambda,122\Lambda,1221\Lambda\rbrace\\
	\pos((p\wedge(q\vee\neg p)))
	\overset{3}&=
	\lbrace\Lambda\rbrace\cup\lbrace 1\pi_1:\pi_1\in\pos(p)\rbrace\cup\lbrace 2\pi_2:\pi_2\in\pos((q\vee\neg p))\rbrace\\
	&=\lbrace\Lambda,1\Lambda,2\Lambda,21\Lambda,22\Lambda,221\Lambda\rbrace\\
	\pos(p)&\stackeq{1.}\lbrace\Lambda\rbrace\cup\emptyset=\lbrace\Lambda\rbrace\\
	\pos((q\vee\neg p))&\stackeq{3.}\lbrace\Lambda\rbrace\cup\lbrace1\pi_1:\pi_1\in\pos(q)\rbrace\cup\lbrace 2\pi_2:\pi_2\in\pos(\neg p)\rbrace\\
	&=\lbrace\Lambda,1\Lambda,2\Lambda,21\Lambda\rbrace\\
	\pos(q)&\stackeq{1.}\lbrace\Lambda\rbrace\cup\emptyset=\lbrace\Lambda\rbrace\\
	\pos(\neg p)&\stackeq{2.}\lbrace\Lambda\rbrace\cup\lbrace 1\pi:\pi\in\pos(p)\rbrace=\Lambda,1\Lambda\rbrace
\end{align*}

\subsubsection{Aufgabe 4.5 (b)}
\begin{tikzpicture}[node distance=5em]
	\tikzstyle{every state}=[shape=circle,draw=black]
	\node[state] (1) {$\neg:\Lambda$};
	\node[state] (2) [below = of 1] {$\neg:1$};
	\node[state] (3) [below = of 2] {$\wedge:11$};
	\node[state] (4) [left = of 3] {$\vee:111$};
	\node[state] (5) [below left = of 4] {$p:1111$};
	\node[state] (6) [below right = of 4] {$q:1112$};
	\node[state] (7) [right = of 3] {$\vee:112$};
	\node[state] (8) [below left = of 7] {$q:1121$};
	\node[state] (9) [below right = of 7] {$\neg:1122$};
	\node[state] (10) [below = of 9] {$p:11221$};
	\path 	(2) edge [, -] node {} (1)
      		(3) edge [, -] node {} (2)
	  		(4) edge [, -] node {} (3)
	  		(5) edge [, -] node {} (4)
	  		(6) edge [, -] node {} (4)
	  		(7) edge [, -] node {} (3)
	  		(8) edge [, -] node {} (7)
	  		(9) edge [, -] node {} (7)
	  		(10) edge [, -] node {} (9)
	;	
\end{tikzpicture}

\begin{align*}
	G\lceil 1122\Lambda\rceil
	&=\Big[\neg\neg((p\vee q)\wedge(q\vee\neg p))\Big]\lceil 1122\Lambda\rceil\\
	&\stackeq{\text{2.}}
	\Big[\neg((p\vee q)\wedge(q\vee\neg p))\Big]\lceil 122\Lambda\rceil\\
	&\stackeq{\text{2.}}
	\Big[((p\vee q)\wedge(q\vee\neg p))\Big] \lceil 22\Lambda\rceil\\
	&\stackeq{\text{3.}}
	\Big[(q\vee\neg p)\Big]\lceil 2\Lambda\rceil\\
	&\stackeq{\text{3.}}
	[\neg p]\lceil\Lambda\rceil\\
	&\stackeq{\text{1.}}[\neg p]=\neg p
\end{align*}

\subsubsection{Aufgabe 4.5 (c)}
\begin{tikzpicture}[node distance=3em]
	\tikzstyle{every state}=[shape=circle,draw=black]
	\node[state] (1) {$\neg:\Lambda$};
	\node[state] (2) [below = of 1] {$\wedge:1$};
	\node[state] (3) [below left = of 2] {$\neg:11$};
	\node[state] (4) [below left = of 3] {$\vee:111$};
	\node[state] (5) [below left = of 4] {$p:1111$};
	\node[state] (6) [below right= of 4] {$q:1112$};
	\node[state] (7) [below right = of 2] {$\neg:12$};
	\node[state] (8) [below right = of 7] {$\vee:121$};
	\node[state] (9) [below left = of 8] {$q:1211$};
	\node[state] (10) [below right = of 8] {$\neg:1212$};
	\node[state] (11) [below = of 10] {$p:12121$};
	\path 	(2) edge [, -] node {} (1)
   		   	(3) edge [, -] node {} (2)
	  		(4) edge [, -] node {} (3)
	  		(5) edge [, -] node {} (4)
	  		(6) edge [, -] node {} (4)
	  		(7) edge [, -] node {} (2)
	  		(8) edge [, -] node {} (7)
	  		(9) edge [, -] node {} (8)
	  		(10) edge [, -] node {} (8)
	  		(11) edge [, -] node {} (10)
		;	
\end{tikzpicture}

\begin{align*}
	H\Big\lceil 121\Lambda\mapsto(\neg p\to q)\Big\rceil
	&=
	\Big[\neg(\neg(p\vee q)\wedge\neg(q\vee\neg p))\Big]\Big\lceil 121\Lambda\mapsto(\neg p\to q)\Big\rceil\\
	&\stackeq{\text{2.}}
	\neg\Big[(\neg(p\vee q)\wedge\neg(q\vee\neg p))\Big]\Big\lceil 21\Lambda\mapsto(\neg p\to q)\Big\rceil\\
	&\stackeq{\text{4.}}
	\neg\Big(\neg(p\vee q)\wedge\Big[\neg(q\vee\neg p)\Big]\Big\lceil 1\Lambda\mapsto(\neg p\to q)\Big\rceil\Big)\\
	&\stackeq{\text{2.}}
	\neg\Big(\neg(p\vee q)\wedge\neg\Big[(q\vee\neg p)\Big]\Big\lceil\Lambda\mapsto(\neg p\to q)\Big\rceil\Big)\\
	&\stackeq{\text{1.}}
	\neg\Big(\neg(p\vee q)\wedge\neg(\neg p\to q)\Big)
\end{align*}
Zur semantischen Äquivalenz: Das Ersetzungstheorem (Satz 3.23) ist nicht anwendbar, da 
\begin{align*}
	(q\vee\neg p)\not\equiv(\neg p\to q)
\end{align*}
Tatsächlich gilt
\begin{align*}
	H\not\equiv H\lceil 121\mapsto(\neg p\to q)\rceil
\end{align*}
Betrachte die Interpretation $I$ mit $p^I=q^I=\bot$.

\subsection{Aufgabe 4.6 (Formelersetzungen)}
\subsubsection{Aufgabe 4.6 (a)}
Die Aussage gilt nicht, denn betrachte folgendes Gegenbeispiel:\\
$F=(p\wedge p)=p\vee G$ mit $\pi=1$ und $H=\neg p$. 
Dann sind $F,G,H$ erfüllbar aber \\
$F\lceil\pi\to H\rceil=(p\vee\neg p)$ ist unerfüllbar.\\
Also: Obwohl die Formeln $F,G,H$ unabhängig voneinander erfüllbar sind, können in $H$ Variablen verwendet werden, die auch an anderer Stelle in $F$ vorkommen.

\subsubsection{Aufgabe 4.6 (b)}
Die Aussage stimmt, denn:\\
Durch scharfes Hinsehen (oder Wahrheitswertetabelle) sieht man (aufgrund der Unerfüllbarkeit von $G$)
\begin{align*}
	G\equiv((H\wedge G)\wedge(H\vee G))
\end{align*}
Nach dem Ersetzungstheorem (Satz 3.23) folgt damit die Behauptung, da in $F$ eine Teilformel durch eine semantisch äquivalente Formel ersetzt wird.

\subsubsection{Aufgabe 4.6 (c)}
Die Aussage stimmt nicht. Betrachte\\
$F=\neg p,\pi=1\Lambda,G=p,H=(p\vee q)$, offensichtlich ist $G\to H$ eine Tautologie, aber $F\to F\lceil\pi\mapsto H\rceil=\neg p\to\neg(p\vee q)$ nicht allgemeingültig. Denn $p^I=\bot$, $q^I=\top$)

%$G=H=p\wedge\neg p$ und $F=\neg H$ mit $\pi=\Lambda$. Dann ist $H\to G$ allgemeingültig, aber
%$F\to \underbrace{F\lceil\pi\to G\rceil}_{=H}$ ist unerfüllbar, denn $F$ ist allgemeingültig und $H$ unerfüllbar.\\

